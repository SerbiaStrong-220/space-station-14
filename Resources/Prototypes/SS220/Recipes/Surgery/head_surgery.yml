- type: surgeryGraph
  id: HeadSurgery
  name: surgery-head-complex-name
  description: surgery-head-complex-description
  targetPart: Head
  requirements:
  - !type:EmptyInventorySlotRequirement
    subject: target
    description: surgery-head-complex-inventory-requirement-description
    failureMessage: surgery-head-complex-inventory-requirement-failure
    slotNames:
    - head
  - !type:WhitelistRequirement
    subject: strap
    description: surgery-strap-bed-requirement-description
    failureMessage: surgery-strap-bed-requirement-failure
    whitelist:
      tags:
      - Bed
  start: surgery-head-start
  end: seal-wound
  graph:
  - node: surgery-head-start
    nodeText:
      examineDescription: surgery-head-examine-start
    edges:
    - to: head-skin-incision
      baseEdge: incision
  - node: head-skin-incision
    baseNode: incision
    edges:
    - to: head-skin-clamp-bleeders
      baseEdge: clamp-bleeders
  - node: head-skin-clamp-bleeders
    baseNode: clamp-bleeders
    edges:
    - to: retract-head-skin
      baseEdge: retract-skin
  - node: retract-head-skin
    baseNode: retract-skin
    edges:
    # implant check
    - to: retract-head-skin
      delay: 15
      actions:
      - !type:CheckImplantAction
      requirements:
      - !type:WhitelistRequirement
        subject: used
        description: surgery-requirement-scanner-required
        failureMessage: surgery-requirement-scanner-required
        whitelist:
          components:
          - ImplantCheckInSurgery
    # deeper
    - to: saw-skull-bone
      baseEdge: saw-bone
    # return
    - to: seal-wound
      baseEdge: seal-wound
  - node: saw-skull-bone
    baseNode: saw-bone
    edges:
    # deeper
    - to: brain-exposed
      baseEdge: retract-skin
    # TODO: better return
    - to: retract-head-skin
      baseEdge: seal-wound
  - node: brain-exposed
    baseNode: retract-skin
    edges:
    # fix mind slave disfunction
    - to: brain-exposed
      delay: 6
      sound:
        path: /Audio/SS220/Surgery/organ.ogg
        params:
          variation: 0.125
      visibilityRequirements:
      # TODO: better when time comes
      - !type:WhitelistRequirement
        subject: performer
        description: surgery-requirement-whitelist-no-text
        failureMessage: surgery-requirement-whitelist-no-text
        whitelist:
          components:
          - MindShield
      requirements:
      # to give player popup about incorrect tool
      - !type:SurgeryToolRequirement
        subject: used
        surgeryTool: specific
        description: surgery-requirement-tool-required-specific
        failureMessage: surgery-requirement-tool-miss
      - !type:WhitelistRequirement
        subject: used
        description: surgery-requirement-fixer-required
        failureMessage: surgery-requirement-fixer-required
        whitelist:
          components:
          - MindSlaveDisfunctionFixer
      - !type:WhitelistRequirement
        subject: target
        description: surgery-requirement-slave-target
        failureMessage: surgery-requirement-slave-target
        whitelist:
          components:
          - MindSlave
      actions:
      - !type:FixMindSlaveDisfunctionAction
    # return
    - to: saw-skull-bone
      baseEdge: seal-wound
  - node: seal-wound
    baseNode: seal-wound
